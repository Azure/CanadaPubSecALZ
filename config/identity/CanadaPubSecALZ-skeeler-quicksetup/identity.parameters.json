{
  "$schema": "https://raw.githubusercontent.com/Azure/CanadaPubSecALZ/main/schemas/latest/landingzones/lz-platform-identity.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "serviceHealthAlerts": {
      "value": {
        "receivers": {
          "email": [
            "identity@example.com"
          ],
          "app": [
            "identity@example.com"
          ],
          "sms": [
            {
              "countryCode": "1",
              "phoneNumber": "6135555555"
            }
          ],
          "voice": [
            {
              "countryCode": "1",
              "phoneNumber": "6135555555"
            }
          ]
        },
        "alertRuleName": "Identity Alerts",
        "incidentTypes": [
          "Incident",
          "Security"
        ],
        "regions": [
          "Global",
          "Canada Central",
          "Canada East"
        ],
        "resourceGroupName": "service-health-alerts-rg",
        "alertRuleDescription": "Identity Alerts for Incidents and Security",
        "actionGroupShortName": "identity-ag",
        "actionGroupName": "Identity Alerts"
      }
    },
    "securityCenter": {
      "value": {
        "email": "security@example.com",
        "phone": "6135555555"
      }
    },
    "subscriptionRoleAssignments": {
      "value": [
        {
          "securityGroupObjectIds": [
            "558bb757-0c38-4a0d-b8e5-4e3a4e577966"
          ],
          "roleDefinitionId": "b24988ac-6180-42a0-ab88-20f7382dd24c",
          "comments": "Built-in Contributor Role"
        }
      ]
    },
    "subscriptionBudget": {
      "value": {
        "createBudget": false
      }
    },
    "subscriptionTags": {
      "value": {
        "ISSO": "isso-tbd",
        "ClientOrganization": "client-organization-tag",
        "CostCenter": "cost-center-tag",
        "DataSensitivity": "data-sensitivity-tag",
        "ProjectContact": "project-contact-tag",
        "ProjectName": "project-name-tag",
        "TechnicalContact": "technical-contact-tag"
      }
    },
    "resourceTags": {
      "value": {
        "ClientOrganization": "client-organization-tag",
        "CostCenter": "cost-center-tag",
        "DataSensitivity": "data-sensitivity-tag",
        "ProjectContact": "project-contact-tag",
        "ProjectName": "project-name-tag",
        "TechnicalContact": "technical-contact-tag"
      }
    },
    "resourceGroups": {
      "value": {
        "automation": "automation",
        "networking": "networking",
        "networkWatcher": "NetworkWatcherRG",
        "backupRecoveryVault": "backup",
        "domainControllers": "DomainControllersRG",
        "dnsResolver": "dns-resolverRG",
        "dnsCondionalForwarders": "dns-CondionalForwardersRG",
        "privateDnsZones": "pubsec-dns"
      }
    },
    "automation": {
      "value": {
        "name": "automation"
      }
    },
    "backupRecoveryVault": {
      "value": {
        "enabled": true,
        "name": "backup-vault"
      }
    },
    "privateDnsZones": {
      "value": {
        "enabled": false,
        "resourceGroupName": "pubsec-dns"
      }
    },
    "privateDnsResolver": {
      "value": {
        "enabled": true,
        "name": "dns-resolver",
        "inboundEndpointName": "dns-resolver-Inbound",
        "outboundEndpointName": "dns-resolver-Outbound"
      }
    },
    "privateDnsResolverRuleset": {
      "value": {
        "enabled": true,
        "name": "dns-resolver-ruleset",
        "linkRuleSetToVnet": true,
        "linkRuleSetToVnetName": "dns-resolver-vnet-link",
        "forwardingRules": [
          {
            "name": "default",
            "domain": "dontMakeMeThink.local",
            "state": "Enabled",
            "targetDnsServers": [
              {
                "ipAddress": "10.99.99.100"
              },
              {
                "ipAddress": "10.99.99.99"
              }
            ]
          }
        ]
      }
    },
    "hubNetwork": {
      "value": {
        "virtualNetworkId": "/subscriptions/ed7f4eed-9010-4227-b115-2a5e37728f27/resourceGroups/pubsec-hub-networking/providers/Microsoft.Network/virtualNetworks/hub-vnet",
        "rfc1918IPRange": "10.18.0.0/22",
        "rfc6598IPRange": "100.60.0.0/16",
        "egressVirtualApplianceIp": "10.18.1.4"
      }
    },
    "network": {
      "value": {
        "deployVnet": true,
        "peerToHubVirtualNetwork": true,
        "useRemoteGateway": false,
        "name": "id-vnet",
        "dnsServers": [
          "10.18.1.4"
        ],
        "addressPrefixes": [
          "10.15.0.0/24"
        ],
        "subnets": {
          "domainControllers": {
            "comments": "Identity Subnet for Domain Controllers and VM-Based DNS Servers",
            "name": "DomainControllers",
            "addressPrefix": "10.15.0.0/27"
          },
          "dnsResolverInbound": {
            "comments": "Azure DNS Resolver Inbound Requests subnet",
            "name": "AzureDNSResolver-Inbound",
            "addressPrefix": "10.15.0.32/27"
          },
          "dnsResolverOutbound": {
            "comments": "Azure DNS Resolver Outbound Requests subnet",
            "name": "AzureDNSResolver-Outbound",
            "addressPrefix": "10.15.0.64/27"
          },
          "optional": []
        }
      }
    }
  }
}
